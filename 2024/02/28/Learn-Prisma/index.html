<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Learn Prisma | Tech-Blog</title><meta name="author" content="GalenZhang"><meta name="copyright" content="GalenZhang"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Learn PrismaExploring Prisma as an ORM for Node Projects IntroductionPrisma abstracts the underlying database and provides a simple, type-safe and expressive API for working with data. By using Prisma">
<meta property="og:type" content="article">
<meta property="og:title" content="Learn Prisma">
<meta property="og:url" content="https://twenty-nine.cn/2024/02/28/Learn-Prisma/index.html">
<meta property="og:site_name" content="Tech-Blog">
<meta property="og:description" content="Learn PrismaExploring Prisma as an ORM for Node Projects IntroductionPrisma abstracts the underlying database and provides a simple, type-safe and expressive API for working with data. By using Prisma">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png">
<meta property="article:published_time" content="2024-02-28T09:49:34.000Z">
<meta property="article:modified_time" content="2024-02-28T09:49:58.892Z">
<meta property="article:author" content="GalenZhang">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://twenty-nine.cn/2024/02/28/Learn-Prisma/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({
  google_ad_client: 'ca-pub-9986556669801460',
  enable_page_level_ads: 'true'
});</script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-FRJRZ7CX2B"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-FRJRZ7CX2B');
</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Error',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Learn Prisma',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-02-28 17:49:58'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">Loading...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load',() => { preloader.endLoading() })

  if (false) {
    document.addEventListener('pjax:send', () => { preloader.initLoading() })
    document.addEventListener('pjax:complete', () => { preloader.endLoading() })
  }
})()</script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">18</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">9</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">2</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="javascript:toRandomPost()"><i class="fa-fw fas fa-random"></i><span> Random</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="Tech-Blog"><span class="site-name">Tech-Blog</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="javascript:toRandomPost()"><i class="fa-fw fas fa-random"></i><span> Random</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Learn Prisma</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2024-02-28T09:49:34.000Z" title="Created 2024-02-28 17:49:34">2024-02-28</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2024-02-28T09:49:58.892Z" title="Updated 2024-02-28 17:49:58">2024-02-28</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Learn Prisma"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post Views:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="Learn-Prisma"><a href="#Learn-Prisma" class="headerlink" title="Learn Prisma"></a>Learn Prisma</h1><p>Exploring Prisma as an ORM for Node Projects</p>
<h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>Prisma abstracts the underlying database and provides a simple, type-safe and expressive API for working with data. By using Prisma, you can write less code, reduce the risk of bugs, and improve the performance of your application, making it a good choice for your data management needs.</p>
<p>📓 Exploring Prisma as an ORM for Node Projects</p>
<h2 id="Setup-Process"><a href="#Setup-Process" class="headerlink" title="Setup Process"></a>Setup Process</h2><p>The Setup Process for Prisma is Divided into different phases as listed below.</p>
<ol>
<li>Installing Dev Dependencies</li>
<li>Initializing TypeScript</li>
<li>Adding Prisma</li>
<li>Adding Prisma Client</li>
<li>Creating Database</li>
</ol>
<h3 id="1-Installing-Dev-Dependencies"><a href="#1-Installing-Dev-Dependencies" class="headerlink" title="1. Installing Dev Dependencies"></a>1. Installing Dev Dependencies</h3><p>To use Prisma ORM you need some of the core dependencies except prisma. Run <code>yarn add -D typescript ts-node @types/node</code> this will install root level packages as development dependency that prisma requires.</p>
<h3 id="2-Initializing-TypeScript"><a href="#2-Initializing-TypeScript" class="headerlink" title="2. Initializing TypeScript"></a>2. Initializing TypeScript</h3><p>After we have installed dependencies we need to initialize typescript as Prisma is a TypeORM. Run <code>yarn tsc --init</code> command to initialize typescript. On successfully installation you will see a <code>tsconfig.json</code> on root directory.</p>
<h3 id="3-Adding-Prisma"><a href="#3-Adding-Prisma" class="headerlink" title="3. Adding Prisma"></a>3. Adding Prisma</h3><p>After initializing typescript lets add prisma as dev dependency using <code>yarn add -D prisma</code>, so that we can now use prisma to define schema and start working.</p>
<h3 id="4-Adding-Prisma-Client"><a href="#4-Adding-Prisma-Client" class="headerlink" title="4. Adding Prisma Client"></a>4. Adding Prisma Client</h3><p>Prisma client library is used to query the database so we will be needing it while consuming data from database. To add prisma client run <code>yarn add @prisma/client</code></p>
<h3 id="5-Creating-Database"><a href="#5-Creating-Database" class="headerlink" title="5. Creating Database"></a>5. Creating Database</h3><p>After completely adding up dependencies lets first create a database that can be used by prisma. I will be using <code>mysql</code> bust you can use any database of your choice.</p>
<ol>
<li>Login to <strong>mysql</strong> shell using <code>mysql -u root -p</code>, enter the password.</li>
<li>Run <code>CREATE DATABASE [dbName];</code> command.</li>
<li>Use <code>SHOW Databases;</code> command to verify the database.</li>
</ol>
<p>For security reasons its better to create a new user and assign a basic privileges like <code>CREATE,READ,UPDATE,DELETE</code> but for now we wont be doing that.</p>
<h2 id="Creating-Prisma-Schema"><a href="#Creating-Prisma-Schema" class="headerlink" title="Creating Prisma Schema"></a>Creating Prisma Schema</h2><p>After creating database we need to create a schema for prisma to use. Prisma schema is a file that defines the database schema and the models that can be used to query the database. Run <code>yarn prisma init --datasource-provider mysql</code> command to initialize prisma. This will create a <code>prisma</code> directory on root directory and a <code>schema.prisma</code> file inside it.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">datasource db &#123;</span><br><span class="line">  provider = &quot;mysql&quot;</span><br><span class="line">  url      = env(&quot;DATABASE_URL&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">generator client &#123;</span><br><span class="line">  provider = &quot;prisma-client-js&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>This is the default schema that is created by prisma. We will be modifying this schema to define our database schema and models.</p>
<p>You will also see a <code>.env</code> file at root of the directory that contains the database url. This is the url that prisma will use to connect to the database. You can change the database url to your database url.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DATABASE_URL=&quot;mysql://johndoe:randompassword@localhost:3306/mydb&quot;</span><br></pre></td></tr></table></figure>

<p>Replace the database url with your database url.</p>
<h2 id="Creating-Models"><a href="#Creating-Models" class="headerlink" title="Creating Models"></a>Creating Models</h2><p>Now that we have created a database and a schema we can start defining our models. Open the <code>schema.prisma</code> file and add the following code.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">model User &#123;</span><br><span class="line">  id          String   @id @default(uuid()) // Primary Key and Default Value as UUID</span><br><span class="line">  email       String   @unique // Unique Constraint</span><br><span class="line">  password    String   @db.VarChar(60) // String with length 60 use bcrypt to hash password and store it</span><br><span class="line">  phoneNumber String   @db.VarChar(15) // String with length 15</span><br><span class="line">  isSuspended Boolean  @default(false) // Boolean with default value false</span><br><span class="line">  isDeleted   Boolean  @default(false) // Boolean with default value false</span><br><span class="line">  profile     Profile? // One To One Relation</span><br><span class="line"></span><br><span class="line">  createdAt DateTime @default(now()) // DateTime with default value as now</span><br><span class="line">  updatedAt DateTime @updatedAt // DateTime that will be updated on every update</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">model Profile &#123;</span><br><span class="line">  id        String  @id @default(uuid()) // Primary Key and Default Value as UUID</span><br><span class="line">  userName  String  @unique @db.VarChar(7) // Allowed Characters -&gt; A-Z,a-z,0-9 -&gt; Total Possible Combination (26+26+9)^7</span><br><span class="line">  isOnline  Boolean @default(false) // Boolean with default value false</span><br><span class="line">  followers BigInt  @default(0) // BigInt with default value 0</span><br><span class="line"></span><br><span class="line">  credential User   @relation(fields: [userId], references: [id], onDelete: Cascade) // On delete cascade</span><br><span class="line">  userId     String @unique // One To One Relation</span><br><span class="line"></span><br><span class="line">  tweets Tweet[] // One To Many Relation</span><br><span class="line"></span><br><span class="line">  createdAt DateTime @default(now())</span><br><span class="line">  updatedAt DateTime @updatedAt</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">model Tweet &#123;</span><br><span class="line">  id          String          @id @default(uuid()) // Primary Key and Default Value as UUID</span><br><span class="line">  description String</span><br><span class="line">  access      AccessModifier? @default(PUBLIC) // Enum with default value PUBLIC</span><br><span class="line"></span><br><span class="line">  Profile   Profile? @relation(fields: [profileId], references: [id], onDelete: Cascade)</span><br><span class="line">  profileId String? </span><br><span class="line"></span><br><span class="line">  createdAt DateTime @default(now())</span><br><span class="line">  updatedAt DateTime @updatedAt</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// Access Modifier Enum</span><br><span class="line">enum AccessModifier &#123;</span><br><span class="line">  PUBLIC</span><br><span class="line">  PRIVATE</span><br><span class="line">  SELF</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>After defining the models we need to migrate the database. Run <code>yarn prisma migrate dev</code> command to migrate the database. This will create a <code>migrations</code> directory that contains the migration files. You can also use <code>yarn prisma migrate dev --name [migrationName]</code> to name the migration.</p>
<h2 id="Generating-Prisma-Client"><a href="#Generating-Prisma-Client" class="headerlink" title="Generating Prisma Client"></a>Generating Prisma Client</h2><p>After defining the models we need to generate prisma client. Prisma client is the library that is used to query the database. Run <code>yarn prisma generate</code> command to generate prisma client. This will create a <code>node_modules/@prisma/client</code> directory that contains the prisma client library.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Environment variables loaded from .<span class="built_in">env</span></span><br><span class="line">Prisma schema loaded from prisma\schema.prisma</span><br><span class="line"></span><br><span class="line">✔ Generated Prisma Client (4.9.0 | library) to .\node_modules\@prisma\client <span class="keyword">in</span> 293ms</span><br><span class="line">You can now start using Prisma Client <span class="keyword">in</span> your code. Reference: https://pris.ly/d/client</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">import &#123; PrismaClient &#125; from <span class="string">&#x27;@prisma/client&#x27;</span></span><br><span class="line">const prisma = new PrismaClient()</span><br><span class="line"></span><br><span class="line">Done <span class="keyword">in</span> 4.59s.</span><br></pre></td></tr></table></figure>

<h2 id="Using-Prisma-Client"><a href="#Using-Prisma-Client" class="headerlink" title="Using Prisma Client"></a>Using Prisma Client</h2><p>Before we start using prisma client lets create a <code>index.ts</code> file on root directory so that we can invoke all the required functions from there. We are trying to mimic a function call but since we are not creating a rest api we will be using <code>console.log</code> to print the output.</p>
<h3 id="Setting-up-index-ts-file"><a href="#Setting-up-index-ts-file" class="headerlink" title="Setting up index.ts file"></a>Setting up index.ts file</h3><p>Lets create a <code>index.ts</code> file on root directory and add the following code.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Path: index.ts</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;APP: Application Started&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">executor</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">executor</span>()</span><br><span class="line">.<span class="title function_">then</span>()</span><br><span class="line">.<span class="title function_">catch</span>()</span><br><span class="line">.<span class="title function_">finally</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;APP: Application Ended&quot;</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>When you run <code>yarn ts-node index.ts</code> command you will see the following output.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">APP: Application Started</span><br><span class="line">APP: Application Ended</span><br><span class="line">Done <span class="keyword">in</span> 3.92s.</span><br></pre></td></tr></table></figure>

<p>Lets create a dev command on <code>package.json</code> file to run the application. Add the following code to <code>package.json</code> file.</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;dev&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ts-node index.ts&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>Now you can run <code>yarn dev</code> command to run the application.</p>
<h3 id="Creating-common-Prisma-Error-Handler"><a href="#Creating-common-Prisma-Error-Handler" class="headerlink" title="Creating common Prisma Error Handler"></a>Creating common Prisma Error Handler</h3><p>Lets also create a common error handler that will be used to handle all the prisma errors. Create a <code>Tables</code> directory and inside inside that directory, create a <code>PrismaError.ts</code> file and add the following code.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Path: Tables\PrismaError.ts</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">PrismaClientKnownRequestError</span> &#125; <span class="keyword">from</span> <span class="string">&quot;@prisma/client/runtime&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> handlePrismaError = (</span><br><span class="line"> <span class="attr">error</span>: <span class="title class_">PrismaClientKnownRequestError</span></span><br><span class="line">): <span class="function"><span class="params">string</span> =&gt;</span> &#123;</span><br><span class="line"> <span class="keyword">switch</span> (error.<span class="property">code</span>) &#123;</span><br><span class="line">  <span class="keyword">case</span> <span class="string">&quot;P2000&quot;</span>:</span><br><span class="line">   <span class="keyword">return</span> <span class="string">`The <span class="subst">$&#123;error.meta?.column_name&#125;</span> is too long. `</span>;</span><br><span class="line">  <span class="keyword">case</span> <span class="string">&quot;P2001&quot;</span>:</span><br><span class="line">   <span class="keyword">return</span> <span class="string">`No records found for the <span class="subst">$&#123;error.meta?.target&#125;</span>`</span>;</span><br><span class="line">  <span class="keyword">case</span> <span class="string">&quot;P2002&quot;</span>:</span><br><span class="line">   <span class="keyword">return</span> <span class="string">`Unique constraint failed on the <span class="subst">$&#123;error.meta?.target&#125;</span>`</span>;</span><br><span class="line">  <span class="keyword">case</span> <span class="string">&quot;P2003&quot;</span>:</span><br><span class="line">   <span class="keyword">return</span> <span class="string">`Foreign key constraint failed on the <span class="subst">$&#123;error.meta?.target&#125;</span>`</span>;</span><br><span class="line">  <span class="keyword">case</span> <span class="string">&quot;P2004&quot;</span>:</span><br><span class="line">   <span class="keyword">return</span> <span class="string">`The <span class="subst">$&#123;error.meta?.target&#125;</span> already exists`</span>;</span><br><span class="line">  <span class="attr">default</span>:</span><br><span class="line">   <span class="keyword">return</span> <span class="string">&quot;Something went wrong&quot;</span>;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>Here we are handling all the prisma errors and returning a custom error message. You can customize the error message as per your requirement.</p>
<h3 id="Creating-User-Handler"><a href="#Creating-User-Handler" class="headerlink" title="Creating User Handler"></a>Creating User Handler</h3><p>After setting up the <code>index.ts</code> file lets create a <code>UserTable.ts</code> file that will contain all the functions related to user. Create a directory named <code>Tabes</code> on root directory and create a <code>UserTable.ts</code> file inside it. Add the following code to <code>UserTable.ts</code> file.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Path: Tables\UserTable.ts</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">UserTable</span> &#123;</span><br><span class="line"> <span class="keyword">static</span> create = <span class="keyword">async</span> () =&gt; &#123;&#125;;</span><br><span class="line"> <span class="keyword">static</span> update = <span class="keyword">async</span> () =&gt; &#123;&#125;;</span><br><span class="line"> <span class="keyword">static</span> <span class="keyword">delete</span> = <span class="keyword">async</span> () =&gt; &#123;&#125;;</span><br><span class="line"> <span class="keyword">static</span> getAll = <span class="keyword">async</span> () =&gt; &#123;&#125;;</span><br><span class="line"> <span class="keyword">static</span> getById = <span class="keyword">async</span> () =&gt; &#123;&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="Create-User"><a href="#Create-User" class="headerlink" title="Create User"></a>Create User</h4><p>Now lets import prisma client and implement the create function first. Our create function will take only few arguments and will return the created user. Add the following code to <code>UserTable.ts</code> file.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Path: Tables\UserTable.ts</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">PrismaClient</span> &#125; <span class="keyword">from</span> <span class="string">&quot;@prisma/client&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; handlePrismaError &#125; <span class="keyword">from</span> <span class="string">&quot;./PrismaError&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> prisma = <span class="keyword">new</span> <span class="title class_">PrismaClient</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">ICreateUser</span> &#123;</span><br><span class="line"> <span class="attr">email</span>: <span class="built_in">string</span>;</span><br><span class="line"> <span class="attr">password</span>: <span class="built_in">string</span>;</span><br><span class="line"> <span class="attr">phoneNumber</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">UserTable</span> &#123;</span><br><span class="line"> <span class="keyword">static</span> create = <span class="keyword">async</span> (<span class="attr">newUser</span>: <span class="title class_">ICreateUser</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">   <span class="keyword">const</span> user = <span class="keyword">await</span> prisma.<span class="property">user</span>.<span class="title function_">create</span>(&#123;</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">     ...newUser,</span><br><span class="line">    &#125;,</span><br><span class="line">   &#125;);</span><br><span class="line">   <span class="keyword">return</span> &#123; user &#125;;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (<span class="attr">e</span>: <span class="built_in">any</span>) &#123;</span><br><span class="line">   <span class="keyword">return</span> &#123; <span class="attr">error</span>: <span class="title function_">handlePrismaError</span>(e) &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;;</span><br><span class="line">....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Update-User"><a href="#Update-User" class="headerlink" title="Update User"></a>Update User</h4><p>Lets implement update functions. Add the following code to <code>UserTable.ts</code> file.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">PrismaClient</span>,<span class="title class_">User</span> &#125; <span class="keyword">from</span> <span class="string">&quot;@prisma/client&quot;</span>;</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">UserTable</span>&#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="keyword">static</span> update = <span class="keyword">async</span> (<span class="attr">updateUser</span>: <span class="title class_">User</span>) =&gt; &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> user = <span class="keyword">await</span> prisma.<span class="property">user</span>.<span class="title function_">update</span>(&#123;</span><br><span class="line">                <span class="attr">where</span>: &#123;</span><br><span class="line">                    <span class="attr">id</span>: updateUser.<span class="property">id</span>,</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">data</span>: &#123;</span><br><span class="line">                    ...updateUser,</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="keyword">return</span> &#123; user &#125;;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (<span class="attr">e</span>: <span class="built_in">any</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> &#123; <span class="attr">error</span>: <span class="title function_">handlePrismaError</span>(e) &#125;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Delete-User"><a href="#Delete-User" class="headerlink" title="Delete User"></a>Delete User</h4><p>Lets implement delete functions. Add the following code to <code>UserTable.ts</code> file.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">UserTable</span>&#123;</span><br><span class="line">  ...</span><br><span class="line"> <span class="keyword">static</span> <span class="keyword">delete</span> = <span class="keyword">async</span> (<span class="attr">user</span>: <span class="title class_">User</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">   <span class="keyword">const</span> deletedUser = <span class="keyword">await</span> prisma.<span class="property">user</span>.<span class="title function_">delete</span>(&#123;</span><br><span class="line">    <span class="attr">where</span>: &#123;</span><br><span class="line">     <span class="attr">id</span>: user.<span class="property">id</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">   &#125;);</span><br><span class="line">   <span class="keyword">return</span> &#123; deletedUser &#125;;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (<span class="attr">e</span>: <span class="built_in">any</span>) &#123;</span><br><span class="line">   <span class="keyword">return</span> &#123; <span class="attr">error</span>: <span class="title function_">handlePrismaError</span>(e) &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Get-All-Users"><a href="#Get-All-Users" class="headerlink" title="Get All Users"></a>Get All Users</h4><p>Lets implement get all users functions. Add the following code to <code>UserTable.ts</code> file.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">UserTable</span>&#123;</span><br><span class="line">  ...</span><br><span class="line"> <span class="keyword">static</span> getAll = <span class="keyword">async</span> (<span class="attr">includeProfile</span>: <span class="built_in">boolean</span> = <span class="literal">false</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">   <span class="keyword">const</span> users = <span class="keyword">await</span> prisma.<span class="property">user</span>.<span class="title function_">findMany</span>(&#123;</span><br><span class="line">    <span class="attr">include</span>: &#123;</span><br><span class="line">     <span class="attr">profile</span>: includeProfile,</span><br><span class="line">    &#125;,</span><br><span class="line">   &#125;);</span><br><span class="line">   <span class="keyword">return</span> &#123; users &#125;;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (<span class="attr">e</span>: <span class="built_in">any</span>) &#123;</span><br><span class="line">   <span class="keyword">return</span> &#123; <span class="attr">error</span>: <span class="title function_">handlePrismaError</span>(e) &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Get-User-By-Id"><a href="#Get-User-By-Id" class="headerlink" title="Get User By Id"></a>Get User By Id</h4><p>Finally lets implement get user by id functions. Add the following code to <code>UserTable.ts</code> file.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">UserTable</span>&#123;</span><br><span class="line">  ...</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> getById = <span class="keyword">async</span> (<span class="attr">id</span>: <span class="built_in">string</span>,<span class="attr">includeProfile</span>: <span class="built_in">boolean</span> = <span class="literal">false</span>) =&gt; &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> user = <span class="keyword">await</span> prisma.<span class="property">user</span>.<span class="title function_">findUnique</span>(&#123;</span><br><span class="line">                <span class="attr">where</span>: &#123;</span><br><span class="line">                    id,</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">include</span>: &#123;</span><br><span class="line">                    <span class="attr">profile</span>: includeProfile,</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="keyword">return</span> &#123; user &#125;;</span><br><span class="line">        &#125;<span class="keyword">catch</span> (<span class="attr">e</span>: <span class="built_in">any</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> &#123; <span class="attr">error</span>: <span class="title function_">handlePrismaError</span>(e) &#125;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Using-User-Handler"><a href="#Using-User-Handler" class="headerlink" title="Using User Handler"></a>Using User Handler</h3><p>Now lets use the user handler in our <code>index.ts</code> file. Add the following code to <code>index.ts</code> file.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">UserTable</span> &#125; <span class="keyword">from</span> <span class="string">&quot;./Tables/UserTable&quot;</span>;</span><br><span class="line">...</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">executor</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line"> <span class="keyword">const</span> <span class="title class_">UsersList</span> = <span class="keyword">await</span> (<span class="keyword">await</span> <span class="title class_">UserTable</span>.<span class="title function_">getAll</span>()).<span class="property">users</span>;</span><br><span class="line"> <span class="keyword">if</span> (<span class="title class_">UsersList</span> &amp;&amp; <span class="title class_">UsersList</span>.<span class="property">length</span> === <span class="number">0</span>)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(</span><br><span class="line">   <span class="string">&quot;APP: Creating a new user&quot;</span>,</span><br><span class="line">   <span class="comment">// Creating a new user</span></span><br><span class="line">   <span class="keyword">await</span> <span class="title class_">UserTable</span>.<span class="title function_">create</span>(&#123;</span><br><span class="line">    <span class="attr">email</span>: <span class="string">&quot;test@Test.com&quot;</span>,</span><br><span class="line">    <span class="attr">password</span>: <span class="string">&quot;password&quot;</span>,</span><br><span class="line">    <span class="attr">phoneNumber</span>: <span class="string">&quot;+977-9000000012&quot;</span>,</span><br><span class="line">   &#125;)</span><br><span class="line">  );</span><br><span class="line"> <span class="keyword">const</span> <span class="title class_">UpdatedList</span> = <span class="keyword">await</span> (<span class="keyword">await</span> <span class="title class_">UserTable</span>.<span class="title function_">getAll</span>()).<span class="property">users</span>;</span><br><span class="line"> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;APP: Users List&quot;</span>, <span class="title class_">UpdatedList</span>);</span><br><span class="line"> <span class="keyword">if</span> (<span class="title class_">UpdatedList</span> &amp;&amp; <span class="title class_">UpdatedList</span>.<span class="property">length</span> !== <span class="number">0</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(</span><br><span class="line">   <span class="string">&quot;APP: Updating the user&quot;</span>,</span><br><span class="line">   <span class="comment">// Updating the user</span></span><br><span class="line">   <span class="keyword">await</span> <span class="title class_">UserTable</span>.<span class="title function_">update</span>(&#123;</span><br><span class="line">    ...<span class="title class_">UpdatedList</span>[<span class="number">0</span>],</span><br><span class="line">    <span class="attr">password</span>: <span class="string">&quot;p@ssw0rd&quot;</span>,</span><br><span class="line">    <span class="attr">isSuspended</span>: <span class="literal">true</span>,</span><br><span class="line">   &#125;)</span><br><span class="line">  );</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">if</span> (<span class="title class_">UpdatedList</span>)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(</span><br><span class="line">   <span class="string">&quot;APP: Selecting First User From Db&quot;</span>,</span><br><span class="line">   <span class="comment">// Selecting the user</span></span><br><span class="line">   <span class="keyword">await</span> <span class="title class_">UserTable</span>.<span class="title function_">getById</span>(<span class="title class_">UpdatedList</span>[<span class="number">0</span>].<span class="property">id</span>)</span><br><span class="line">  );</span><br><span class="line"> <span class="keyword">if</span> (<span class="title class_">UpdatedList</span>)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(</span><br><span class="line">   <span class="string">&quot;APP: Deleting First User From Db&quot;</span>,</span><br><span class="line">   <span class="comment">// Deleting the user</span></span><br><span class="line">   <span class="keyword">await</span> <span class="title class_">UserTable</span>.<span class="title function_">delete</span>(<span class="title class_">UpdatedList</span>[<span class="number">0</span>])</span><br><span class="line">  );</span><br><span class="line"> <span class="comment">// Getting the final list</span></span><br><span class="line"> <span class="keyword">const</span> <span class="title class_">FinalList</span> = <span class="keyword">await</span> (<span class="keyword">await</span> <span class="title class_">UserTable</span>.<span class="title function_">getAll</span>(<span class="literal">true</span>)).<span class="property">users</span>;</span><br><span class="line"> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;APP: Final Users List&quot;</span>, <span class="title class_">FinalList</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>Similarly you can create other tables and use them in your application.</p>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>In a nutshell we have learned how to setup, create and use prisma and prisma client in our application. For further reading you can check out the <a target="_blank" rel="noopener" href="https://www.prisma.io/docs/">Prisma Documentation</a>. If you have any questions or suggestions please feel free to comment below and hope you enjoyed exploring Prisma with me.</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="https://twenty-nine.cn">GalenZhang</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="https://twenty-nine.cn/2024/02/28/Learn-Prisma/">https://twenty-nine.cn/2024/02/28/Learn-Prisma/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/2024/02/26/Learn-Firebase-with-Vite/" title="Learn Firebase with Vite"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">Next</div><div class="next_info">Learn Firebase with Vite</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">GalenZhang</div><div class="author-info__description">Be fearless, be authentic.</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">18</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">9</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">2</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/galenzhang"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/galenzhang" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:z6014840@163.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Learn-Prisma"><span class="toc-number">1.</span> <span class="toc-text">Learn Prisma</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Introduction"><span class="toc-number">1.1.</span> <span class="toc-text">Introduction</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Setup-Process"><span class="toc-number">1.2.</span> <span class="toc-text">Setup Process</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Installing-Dev-Dependencies"><span class="toc-number">1.2.1.</span> <span class="toc-text">1. Installing Dev Dependencies</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Initializing-TypeScript"><span class="toc-number">1.2.2.</span> <span class="toc-text">2. Initializing TypeScript</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-Adding-Prisma"><span class="toc-number">1.2.3.</span> <span class="toc-text">3. Adding Prisma</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-Adding-Prisma-Client"><span class="toc-number">1.2.4.</span> <span class="toc-text">4. Adding Prisma Client</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-Creating-Database"><span class="toc-number">1.2.5.</span> <span class="toc-text">5. Creating Database</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Creating-Prisma-Schema"><span class="toc-number">1.3.</span> <span class="toc-text">Creating Prisma Schema</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Creating-Models"><span class="toc-number">1.4.</span> <span class="toc-text">Creating Models</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Generating-Prisma-Client"><span class="toc-number">1.5.</span> <span class="toc-text">Generating Prisma Client</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Using-Prisma-Client"><span class="toc-number">1.6.</span> <span class="toc-text">Using Prisma Client</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Setting-up-index-ts-file"><span class="toc-number">1.6.1.</span> <span class="toc-text">Setting up index.ts file</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Creating-common-Prisma-Error-Handler"><span class="toc-number">1.6.2.</span> <span class="toc-text">Creating common Prisma Error Handler</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Creating-User-Handler"><span class="toc-number">1.6.3.</span> <span class="toc-text">Creating User Handler</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Create-User"><span class="toc-number">1.6.3.1.</span> <span class="toc-text">Create User</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Update-User"><span class="toc-number">1.6.3.2.</span> <span class="toc-text">Update User</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Delete-User"><span class="toc-number">1.6.3.3.</span> <span class="toc-text">Delete User</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Get-All-Users"><span class="toc-number">1.6.3.4.</span> <span class="toc-text">Get All Users</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Get-User-By-Id"><span class="toc-number">1.6.3.5.</span> <span class="toc-text">Get User By Id</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Using-User-Handler"><span class="toc-number">1.6.4.</span> <span class="toc-text">Using User Handler</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Conclusion"><span class="toc-number">1.7.</span> <span class="toc-text">Conclusion</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/02/28/Learn-Prisma/" title="Learn Prisma">Learn Prisma</a><time datetime="2024-02-28T09:49:34.000Z" title="Created 2024-02-28 17:49:34">2024-02-28</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/02/26/Learn-Firebase-with-Vite/" title="Learn Firebase with Vite">Learn Firebase with Vite</a><time datetime="2024-02-26T09:13:03.000Z" title="Created 2024-02-26 17:13:03">2024-02-26</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/02/21/Learning-Node-js-and-Express/" title="Learning Node.js and Express">Learning Node.js and Express</a><time datetime="2024-02-21T03:42:32.000Z" title="Created 2024-02-21 11:42:32">2024-02-21</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/01/26/Docker-basic-Learning/" title="Docker basic Learning">Docker basic Learning</a><time datetime="2024-01-26T01:35:43.000Z" title="Created 2024-01-26 09:35:43">2024-01-26</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/01/26/Introduction-to-Postman/" title="Introduction to Postman">Introduction to Postman</a><time datetime="2024-01-26T01:18:18.000Z" title="Created 2024-01-26 09:18:18">2024-01-26</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By GalenZhang</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9986556669801460" crossorigin="anonymous"></script><ins class="adsbygoogle" style="display:block" data-ad-format="fluid" data-ad-layout-key="-ef+6k-30-ac+ty" data-ad-client="ca-pub-9986556669801460" data-ad-slot="8401608271"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9986556669801460" data-ad-slot="3844605536" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script><ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-9986556669801460" data-ad-slot="2531523866"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script><script src="/zhheo/random.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading the Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>