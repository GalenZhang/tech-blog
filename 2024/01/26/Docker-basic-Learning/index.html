<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Docker basic Learning | Tech-Blog</title><meta name="author" content="GalenZhang"><meta name="copyright" content="GalenZhang"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="This is just a simple demonstration to get a basic understanding of how Docker works while working step by step. I learned docker like this and made this repo to solve some problems that I faced durin">
<meta property="og:type" content="article">
<meta property="og:title" content="Docker basic Learning">
<meta property="og:url" content="https://twenty-nine.cn/2024/01/26/Docker-basic-Learning/index.html">
<meta property="og:site_name" content="Tech-Blog">
<meta property="og:description" content="This is just a simple demonstration to get a basic understanding of how Docker works while working step by step. I learned docker like this and made this repo to solve some problems that I faced durin">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png">
<meta property="article:published_time" content="2024-01-26T01:35:43.000Z">
<meta property="article:modified_time" content="2024-01-29T02:11:55.660Z">
<meta property="article:author" content="GalenZhang">
<meta property="article:tag" content="Docker">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://twenty-nine.cn/2024/01/26/Docker-basic-Learning/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({
  google_ad_client: 'ca-pub-9986556669801460',
  enable_page_level_ads: 'true'
});</script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-FRJRZ7CX2B"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-FRJRZ7CX2B');
</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Error',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Docker basic Learning',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-01-29 10:11:55'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">Loading...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load',() => { preloader.endLoading() })

  if (false) {
    document.addEventListener('pjax:send', () => { preloader.initLoading() })
    document.addEventListener('pjax:complete', () => { preloader.endLoading() })
  }
})()</script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">16</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">9</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">2</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="javascript:toRandomPost()"><i class="fa-fw fas fa-random"></i><span> Random</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="Tech-Blog"><span class="site-name">Tech-Blog</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="javascript:toRandomPost()"><i class="fa-fw fas fa-random"></i><span> Random</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Docker basic Learning</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2024-01-26T01:35:43.000Z" title="Created 2024-01-26 09:35:43">2024-01-26</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2024-01-29T02:11:55.660Z" title="Updated 2024-01-29 10:11:55">2024-01-29</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Docker basic Learning"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post Views:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>This is just a simple demonstration to get a basic understanding of how Docker works while working step by step. I learned docker like this and made this repo to solve some problems that I faced during my learning experience so that it might help other beginners. Hope you enjoy learning. If you like it give it an ⭐ on <a target="_blank" rel="noopener" href="https://github.com/championshuttler/docker-basicLearning">GitHub</a> and <a target="_blank" rel="noopener" href="https://www.paypal.me/championshuttler">support</a> my work.</p>
<p><a target="_blank" rel="noopener" href="https://github.com/championshuttler/docker-basiclearning"><img src="https://img.shields.io/github/stars/championshuttler/docker-basiclearning.svg?style=social" alt="Star on GitHub"></a></p>
<p><strong>Important:-</strong> By seeing the size of readme you might have second thoughts but, to be honest, if you work from start you won’t experience any problem and learn along the way.</p>
<p><a href="https://www.buymeacoffee.com/championshuttler" target="_blank"><img src="https://www.buymeacoffee.com/assets/img/custom_images/orange_img.png" alt="Buy Me A Coffee" style="height: 41px !important;width: 174px !important;box-shadow: 0px 3px 2px 0px rgba(190, 190, 190, 0.5) !important;-webkit-box-shadow: 0px 3px 2px 0px rgba(190, 190, 190, 0.5) !important;" ></a></p>
<p><a target="_blank" rel="noopener" href="https://saythanks.io/to/shivams2799@gmail.com"><img src="https://img.shields.io/badge/Say%20Thanks-!-1EAEDB.svg" alt="Say Thanks!"></a></p>
<h2 id="Contents"><a href="#Contents" class="headerlink" title="Contents"></a>Contents</h2><ul>
<li><a href="#requirements"><strong>Requirements</strong></a></li>
<li><a href="#docker"><strong>Docker</strong></a><ul>
<li><a href="#what-is-docker">What is docker?</a></li>
<li><a href="#what-is-a-container">What is a container?</a></li>
<li><a href="#why-use-containers">Why use container?</a></li>
</ul>
</li>
<li><a href="#getting-started"><strong>Getting Started</strong></a><ul>
<li><a href="#setting-up-your-machine">Setting up your machine</a></li>
<li><a href="#writing-your-first-dockerfile">Writing your first Dockerfile</a></li>
<li><a href="#building-your-docker-images">Building your Docker Images</a></li>
<li><a href="#running-the-docker-image">Running the docker image</a></li>
<li><a href="#understanding-docker-images-and-image-layers">Understanding Docker images and image layers</a></li>
<li><a href="#using-image-tags-effectively">Using image tags effectively</a></li>
</ul>
</li>
<li><a href="#deploying-multi-container-apps-with-docker-compose"><strong>Deploying Multi Container Apps with Docker Compose</strong></a>]<ul>
<li><a href="#what-is-docker-compose">What is Docker Compose</a></li>
<li><a href="#deploying-app-with-docker-compose">Deploying app with Docker Compose</a></li>
</ul>
</li>
<li><a href="#give-feedback"><strong>Give Feedback</strong></a></li>
<li><a href="#references"><strong>References</strong></a></li>
</ul>
<h2 id="Requirements"><a href="#Requirements" class="headerlink" title="Requirements"></a>Requirements</h2><ul>
<li>You need to have <a target="_blank" rel="noopener" href="https://www.docker.com/">Docker</a> installed for your OS.</li>
<li>You need to have <a target="_blank" rel="noopener" href="https://docs.docker.com/compose/install/">Docker Compose</a> installed for your OS.</li>
</ul>
<h2 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h2><h4 id="What-is-Docker"><a href="#What-is-Docker" class="headerlink" title="What is Docker?"></a>What is Docker?</h4><p>Wikipedia defines Docker as</p>
<blockquote>
<p> is a set of the platform as a service (PaaS) products that use OS-level virtualization to deliver software in packages called containers. Containers are isolated from one another and bundle their software, libraries, and configuration files; they can communicate with each other through well-defined channels. All containers are run by a single operating system kernel and therefore use fewer resources than virtual machines.</p>
</blockquote>
<p>Docker helps you in deploying your applications more efficiently in a sandbox (called containers) to run on the host operating system i.e. Mac. The main advantage of docker is that it allows you to package software with all of its dependencies into a single standardized unit.</p>
<h4 id="What-is-a-Container"><a href="#What-is-a-Container" class="headerlink" title="What is a Container?"></a>What is a Container?</h4><p>The container is a solution for how to get the software to run without any problems when moved from one computing environment to another. This could be from a staging environment into production or maybe from a laptop to a different laptop with another operating system.</p>
<h4 id="Why-use-containers"><a href="#Why-use-containers" class="headerlink" title="Why use containers?"></a>Why use containers?</h4><p>Containers provide a logical packaging mechanism in which your applications can be abstracted from the environment in which they run. The major difference is that every container does not require its full-fledged OS. All containers on a single host sharing a single OS. This helps in frees up huge amounts of system resources such as CPU, RAM.</p>
<h2 id="Getting-Started"><a href="#Getting-Started" class="headerlink" title="Getting Started"></a>Getting Started</h2><h4 id="Setting-up-your-machine"><a href="#Setting-up-your-machine" class="headerlink" title="Setting up your machine"></a>Setting up your machine</h4><p>Once you are done installing Docker, test your Docker installation by running the following:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker run hello-world</span><br><span class="line"></span><br><span class="line">Hello from Docker.</span><br><span class="line">This message shows that your installation appears to be working correctly.</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<h4 id="Writing-your-first-Dockerfile"><a href="#Writing-your-first-Dockerfile" class="headerlink" title="Writing your first Dockerfile"></a>Writing your first Dockerfile</h4><ol>
<li>A <code>Dockerfile</code> is a text document that contains all the commands you could call on the command line to make an image. Create a file <code>hello.js</code> and copy this code into it. Here we wrote a simple JS code to show Hello World on <code>localhost:8888</code>.</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">var http = require(<span class="string">&quot;http&quot;</span>);</span><br><span class="line"></span><br><span class="line">http.createServer(<span class="keyword">function</span> (request, response) &#123;</span><br><span class="line">   response.writeHead(200, &#123;<span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/plain&#x27;</span>&#125;);</span><br><span class="line">   response.end(<span class="string">&#x27;Hello World\n&#x27;</span>);</span><br><span class="line">&#125;).listen(8888);</span><br><span class="line"></span><br><span class="line">// Console will <span class="built_in">print</span> the message</span><br><span class="line">console.log(<span class="string">&#x27;Server running at http://127.0.0.1:8888/&#x27;</span>);</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>Create a file named <code>Dockerfile</code> and copy this code into it.</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">FROM node:8 </span><br><span class="line"></span><br><span class="line">LABEL maintainer=<span class="string">&quot;yourEmail@example.com&quot;</span></span><br><span class="line"></span><br><span class="line">RUN npm install</span><br><span class="line"></span><br><span class="line">ADD hello.js /hello.js</span><br><span class="line"></span><br><span class="line">EXPOSE 8888</span><br><span class="line"></span><br><span class="line">ENTRYPOINT [ <span class="string">&quot;node&quot;</span>, <span class="string">&quot;hello.js&quot;</span> ]</span><br></pre></td></tr></table></figure>

<p>Even if this is the first Dockerfile you’ve ever seen, I’d say you could have a good guess what’s happening here. The Dockerfile instructions are FROM, ENV, LABEL, RUN , ADD , EXPOSE, and ENTRYPOINT; they’re in capitals but that’s a convention, not a requirement.</p>
<p>At a high-level, this Dockerfile gives instructions like Start with the node image, add <code>“championshuttler@gmail.com”</code> as the maintainer, run <code>npm install</code> to install dependencies, copy the file in the application code, document the app’s network port, and set hello.js as the default application to run.</p>
<h4 id="Building-your-Docker-Images"><a href="#Building-your-Docker-Images" class="headerlink" title="Building your Docker Images"></a>Building your Docker Images</h4><p>Now we will create a docker image in our local machine. Open your terminal in the current project’s folder and run</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t helloworld .</span><br></pre></td></tr></table></figure>

<p>Here you’re telling Docker to build an image called <code>helloworld</code> based on the contents of the current directory (note the <strong>dot (.)</strong> at the end of the build command). Docker will look for the Dockerfile in the directory and build the image based on the instructions in the file.</p>
<h4 id="Running-the-docker-image"><a href="#Running-the-docker-image" class="headerlink" title="Running the docker image"></a>Running the docker image</h4><p>After building the docker image, the next step would be to run the image and see if it works:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -p 8888:8888 helloworld</span><br></pre></td></tr></table></figure>

<p>The command we just ran used port 8888 for the server inside the container and exposed this externally on port 8888. Head over to the URL with port 8888:</p>
<p align="center">
  <img src="./local_resources/locahost.jpg" />
</p>

<p>Congrats! You have successfully created your first docker image.</p>
<h4 id="Understanding-Docker-images-and-image-layers"><a href="#Understanding-Docker-images-and-image-layers" class="headerlink" title="Understanding Docker images and image layers"></a>Understanding Docker images and image layers</h4><p>Docker images are like virtual machine templates and are used to start containers. Under the hood, they are made up of one or more read-only layers, that when stacked together, make up the overall image. Docker takes care of stacking these layers and representing them as a single unified object. <strong>Note:</strong> Docker Images are immutable means Docker images can’t ever change. Once you’ve made one, you can delete it, but you can’t modify it.</p>
<p align="center">
  <img src="./local_resources/dockerimage.jpg" />
</p>

<p>The Docker image contains all the files you packaged, which become the container’s filesystem - and it also contains a lot of metadata about the image itself. That includes a brief history of how the image was built. You can use that to see each layer of the image, and the command that built the layer. You can check the history of <code>helloworld</code> image by using:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker image <span class="built_in">history</span> helloworld                                                                         </span><br><span class="line">IMAGE               CREATED             CREATED BY                                      COMMENT</span><br><span class="line">cb84eb33ca20        58 seconds ago      /bin/sh -c <span class="comment">#(nop)  ENTRYPOINT [&quot;node&quot; &quot;hello…  </span></span><br><span class="line">7d652a817a9f        58 seconds ago      /bin/sh -c <span class="comment">#(nop)  EXPOSE 8888              </span></span><br><span class="line">334575e947c9        59 seconds ago      /bin/sh -c <span class="comment">#(nop) ADD file:b9606ef53b832e66e…   </span></span><br></pre></td></tr></table></figure>

<p>The <code>CREATED BY</code> commands are the Dockerfile instructions – there’s a one-to-one relationship, so each line in the Dockerfile creates an image layer.</p>
<h4 id="Pushing-your-images-to-Docker-Hub"><a href="#Pushing-your-images-to-Docker-Hub" class="headerlink" title="Pushing your images to Docker Hub"></a>Pushing your images to Docker Hub</h4><p>First, you need to log in with your <a target="_blank" rel="noopener" href="https://hub.docker.com/">dockerhub</a> account by </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker login --username <span class="variable">$dockerId</span></span><br></pre></td></tr></table></figure>

<p>Now that you’re logged in, you can push images to your account or to any organizations you have access to. If you’re not a member of any organization, then you can only push images to repositories in your account.</p>
<p>We built a Docker image called <code>helloworld</code>. That image reference doesn’t have an account name, so we can’t push it to any registries. We don’t need to rebuild the image to give it a new reference though, images can have several references. Tag your image by like this:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker image tag helloworld <span class="variable">$dockerId</span>/helloworld:v1</span><br></pre></td></tr></table></figure>

<p>Now we have an image reference with our Docker ID in the account name, and we logged in to Docker Hub so we ready to share our image! The docker image push command is the counterpart of the pull command, it uploads our local image layers to the registry:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker image push championshuttler/helloworld:v1                                           </span><br><span class="line"></span><br><span class="line">The push refers to a repository [docker.io/championshuttler/helloworld]</span><br><span class="line">9519a21ac374: Pushed</span><br></pre></td></tr></table></figure>

<h4 id="Using-image-tags-effectively"><a href="#Using-image-tags-effectively" class="headerlink" title="Using image tags effectively"></a>Using image tags effectively</h4><p>We can put any string into a Docker image tag, and as we’ve already seen you can have multiple tags for the same image. We’ll use that to version the software in our images and let users make informed choices for what they won’t use - and to make our own informed choices when we use other people’s images.</p>
<p>Many software projects use a numeric versioning scheme with decimal points to indicate how big a change there is between versions, and you can follow that with your image tags. The basic idea is something like [major].[minor].[patch], which has some implicit guarantees. A release that only increments the patch number might have bugfixes but should have the same features as the last version; a release which increments the minor version might add features but shouldn’t remove any; a major release could have completely different features.</p>
<h2 id="Deploying-Multi-Container-Apps-with-Docker-Compose"><a href="#Deploying-Multi-Container-Apps-with-Docker-Compose" class="headerlink" title="Deploying Multi Container Apps with Docker Compose"></a>Deploying Multi Container Apps with Docker Compose</h2><h4 id="What-is-Docker-Compose"><a href="#What-is-Docker-Compose" class="headerlink" title="What is Docker Compose"></a>What is Docker Compose</h4><p>Most applications don’t run in one single component. Even large old apps are typically built as front-end and back-end components, which are separate logical layers running in physically distributed components. Docker is ideally suited to running distributed applications - from n-tier monoliths to modern microservices. Each component runs in its lightweight container, and Docker plugs them together using standard network protocols. You define and manage multi-container apps like this using Docker Compose. Docker Compose is a tool for defining and running multi-container Docker applications. With Compose, you use a <code>YAML</code> file to configure your application’s services. Then, with a single command, we create and start all the services from your configuration.</p>
<p>Docker Compose file describes the desired state of your app - what it should look like when everything’s running. It’s a simple file format where you capture all the options you would put in your docker container run commands into the Compose file. Then you use the Docker Compose tool to run the app. It works out what Docker resources it needs - which could be containers, networks, or volumes - and sends requests to the Docker API to create them. The default name for the Compose YAML file is <code>docker-compose.yml</code>. However, we can use the <strong>-f</strong> flag to specify custom filenames.</p>
<p>Let’s get started.</p>
<p>Below the code shows a very simple <code>Docker Compose</code> file that defines a small Flask app with two services (web-frontend and redis). The app is a simple web server that counts the number of visits and stores the value in Redis. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">version: <span class="string">&quot;3.5&quot;</span></span><br><span class="line">services:</span><br><span class="line">  web-frontend:</span><br><span class="line">    build: .</span><br><span class="line">    <span class="built_in">command</span>: python app.py</span><br><span class="line">    ports:</span><br><span class="line">      - target: 8888</span><br><span class="line">        published: 8888</span><br><span class="line">    networks:</span><br><span class="line">      - counter-net</span><br><span class="line">    volumes:</span><br><span class="line">      - <span class="built_in">type</span>: volume</span><br><span class="line">        <span class="built_in">source</span>: counter-vol</span><br><span class="line">        target: /code</span><br><span class="line">  redis:</span><br><span class="line">    image: <span class="string">&quot;redis:alpine&quot;</span></span><br><span class="line">    networks:</span><br><span class="line">      counter-net:</span><br><span class="line"></span><br><span class="line">networks:</span><br><span class="line">  counter-net:</span><br><span class="line"></span><br><span class="line">volumes:</span><br><span class="line">  counter-vol:</span><br></pre></td></tr></table></figure>

<ul>
<li><p>The <code>version</code> key is necessary, and it should always the first line of the file. This explains the version of the <code>Compose file</code> format (basically the API).</p>
</li>
<li><p>The top-level <code>services</code> key is where we define the different application services. The example we’re using defines two services; a web front-end called <code>web-frontend</code>, and an in-memory database called Redis. Compose will deploy each of these services as its container.</p>
</li>
<li><p>The top-level <code>networks</code> key tells Docker to create new networks. By default, Compose will create bridge networks. These are single-host networks that can only connect containers on the same host.</p>
</li>
</ul>
<p>Within the definition of the web-frontend service, we give Docker the following instructions:</p>
<ul>
<li><strong>build</strong>: . This tells Docker to build a new image using the instructions in the Dockerfile in the current directory (.). The newly built image will be used to create the container for this service.</li>
<li><strong>command</strong>: python app.py This tells Docker to run a Python app called app.py is the main app in the container. The app.py file must exist in the image, and the image must contain Python. The Dockerfile takes care of both of these requirements.</li>
<li><strong>ports</strong>: Tells Docker to map port 5000 inside the container (-target) to port 5000 on the host (published). This means that traffic sent to the Docker host on port 5000 will be directed to port 5000 on the container. The app inside the container listens on port 5000.</li>
<li><strong>networks</strong>: Tells Docker which network to attach the service’s container to. The network should already exist or be defined in the network’s top-level key. If it’s an overlay network, it will need to have the attachable flag so that standalone containers can be attached to it (Compose deploys standalone containers instead of Docker Services).</li>
<li><strong>volumes</strong>: Tells Docker to mount the counter-vol volume (source:) to &#x2F;code (‘target:’) inside the container. The counter-vol volume needs to already exist, or be defined in the volumes top-level key at the bottom of the file.</li>
</ul>
<h4 id="Deploying-an-app-with-Docker-Compose"><a href="#Deploying-an-app-with-Docker-Compose" class="headerlink" title="Deploying an app with Docker Compose"></a>Deploying an app with Docker Compose</h4><p>We’ll deploy the app defined in the Compose file from the previous section. To do this, you’ll need the following 4 files from <a target="_blank" rel="noopener" href="https://github.com/championshuttler/counter-app">https://github.com/championshuttler/counter-app</a>:</p>
<ul>
<li>Dockerfile</li>
<li>app.py</li>
<li>requirements.txt</li>
<li>docker-compose.yml</li>
</ul>
<p>Clone the Git repo locally.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/championshuttler/counter-app.git</span><br></pre></td></tr></table></figure>

<p>Let’s quickly describe each file:</p>
<ul>
<li><code>app.py</code> is the application code (a Python Flask app).</li>
<li><code>docker-compose.yml</code> is the Docker Compose file that describes how Docker should deploy the app.</li>
<li><code>Dockerfile</code> describes how to build the image for the web-frontend service.</li>
<li><code>requirements.txt</code> lists the Python packages required for the app.</li>
</ul>
<p>Let’s use Compose to bring the app up. You must run all of these following commands from within the <code>counter-app</code> directory:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up &amp;</span><br></pre></td></tr></table></figure>

<p>It’ll take a few seconds for the app to come up, and the output can be quite verbose.</p>
<p>With the application successfully deployed, you can point a web browser at your Docker host on <code>port 5000</code>and see the application in all its glory.</p>
<h2 id="Give-Feedback"><a href="#Give-Feedback" class="headerlink" title="Give Feedback"></a>Give Feedback</h2><p>Did you find the tutorial to be a complete mess or did you have fun and learn something? Send in your thoughts directly to me or just create an issue. Find me on <a target="_blank" rel="noopener" href="https://twitter.com/idkhtml">Twitter</a> too, feel free to ask you have some doubts.</p>
<p>I would love to hear about your experience with this tutorial. Hope you enjoyed learning. If you like it please give it an ⭐ on <a target="_blank" rel="noopener" href="https://github.com/championshuttler/docker-basicLearning">GitHub</a> and <a target="_blank" rel="noopener" href="https://www.paypal.me/championshuttler">support</a> my work.</p>
<h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><ul>
<li><a target="_blank" rel="noopener" href="https://leanpub.com/dockerdeepdive">Docker Deep Dive</a></li>
<li><a target="_blank" rel="noopener" href="https://docker-curriculum.com/">Docker Curriculum</a></li>
</ul>
<h2 id="TODO"><a href="#TODO" class="headerlink" title="TODO"></a>TODO</h2><ul>
<li>Add Docker Volume Docs</li>
<li>Add Docker container docs</li>
<li>Add Docker swarm docs</li>
<li>Add Docker Networking docs</li>
<li>Add  Docker overlay networking docs</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="https://twenty-nine.cn">GalenZhang</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="https://twenty-nine.cn/2024/01/26/Docker-basic-Learning/">https://twenty-nine.cn/2024/01/26/Docker-basic-Learning/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Docker/">Docker</a></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/02/21/Learning-Node-js-and-Express/" title="Learning Node.js and Express"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">Previous</div><div class="prev_info">Learning Node.js and Express</div></div></a></div><div class="next-post pull-right"><a href="/2024/01/26/Introduction-to-Postman/" title="Introduction to Postman"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">Next</div><div class="next_info">Introduction to Postman</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">GalenZhang</div><div class="author-info__description">Be fearless, be authentic.</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">16</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">9</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">2</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/galenzhang"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/galenzhang" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:z6014840@163.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Contents"><span class="toc-number">1.</span> <span class="toc-text">Contents</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Requirements"><span class="toc-number">2.</span> <span class="toc-text">Requirements</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Docker"><span class="toc-number">3.</span> <span class="toc-text">Docker</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#What-is-Docker"><span class="toc-number">3.0.1.</span> <span class="toc-text">What is Docker?</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#What-is-a-Container"><span class="toc-number">3.0.2.</span> <span class="toc-text">What is a Container?</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Why-use-containers"><span class="toc-number">3.0.3.</span> <span class="toc-text">Why use containers?</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Getting-Started"><span class="toc-number">4.</span> <span class="toc-text">Getting Started</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Setting-up-your-machine"><span class="toc-number">4.0.1.</span> <span class="toc-text">Setting up your machine</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Writing-your-first-Dockerfile"><span class="toc-number">4.0.2.</span> <span class="toc-text">Writing your first Dockerfile</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Building-your-Docker-Images"><span class="toc-number">4.0.3.</span> <span class="toc-text">Building your Docker Images</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Running-the-docker-image"><span class="toc-number">4.0.4.</span> <span class="toc-text">Running the docker image</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Understanding-Docker-images-and-image-layers"><span class="toc-number">4.0.5.</span> <span class="toc-text">Understanding Docker images and image layers</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Pushing-your-images-to-Docker-Hub"><span class="toc-number">4.0.6.</span> <span class="toc-text">Pushing your images to Docker Hub</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Using-image-tags-effectively"><span class="toc-number">4.0.7.</span> <span class="toc-text">Using image tags effectively</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Deploying-Multi-Container-Apps-with-Docker-Compose"><span class="toc-number">5.</span> <span class="toc-text">Deploying Multi Container Apps with Docker Compose</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#What-is-Docker-Compose"><span class="toc-number">5.0.1.</span> <span class="toc-text">What is Docker Compose</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Deploying-an-app-with-Docker-Compose"><span class="toc-number">5.0.2.</span> <span class="toc-text">Deploying an app with Docker Compose</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Give-Feedback"><span class="toc-number">6.</span> <span class="toc-text">Give Feedback</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#References"><span class="toc-number">7.</span> <span class="toc-text">References</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TODO"><span class="toc-number">8.</span> <span class="toc-text">TODO</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/02/21/Learning-Node-js-and-Express/" title="Learning Node.js and Express">Learning Node.js and Express</a><time datetime="2024-02-21T03:42:32.000Z" title="Created 2024-02-21 11:42:32">2024-02-21</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/01/26/Docker-basic-Learning/" title="Docker basic Learning">Docker basic Learning</a><time datetime="2024-01-26T01:35:43.000Z" title="Created 2024-01-26 09:35:43">2024-01-26</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/01/26/Introduction-to-Postman/" title="Introduction to Postman">Introduction to Postman</a><time datetime="2024-01-26T01:18:18.000Z" title="Created 2024-01-26 09:18:18">2024-01-26</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/01/26/ES6-Intro/" title="ES6 Intro">ES6 Intro</a><time datetime="2024-01-26T01:09:23.000Z" title="Created 2024-01-26 09:09:23">2024-01-26</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/01/26/JavaScript-ES6-Syntax/" title="JavaScript ES6 Syntax">JavaScript ES6 Syntax</a><time datetime="2024-01-26T01:06:22.000Z" title="Created 2024-01-26 09:06:22">2024-01-26</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By GalenZhang</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9986556669801460" crossorigin="anonymous"></script><ins class="adsbygoogle" style="display:block" data-ad-format="fluid" data-ad-layout-key="-ef+6k-30-ac+ty" data-ad-client="ca-pub-9986556669801460" data-ad-slot="8401608271"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9986556669801460" data-ad-slot="3844605536" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script><ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-9986556669801460" data-ad-slot="2531523866"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script><script src="/zhheo/random.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading the Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>